{"version":3,"file":"markdownItAST.umd.js","sources":["../index.js"],"sourcesContent":["\n\nfunction markdownItAST(tokens) {\n  function genTreeNode(node) {\n    return {\n      nodeType: node && node.type.replace('_open', ''),\n      openNode: node,\n      closeNode: null,\n      children: []\n    };\n  }\n\n    // dummy root node\n  let rootNode = genTreeNode(null);\n  let curr = rootNode;\n  let stack = [];\n  tokens.forEach(function (tok, idx) {\n    let tmp;\n    if (tok.nesting === 1) {\n      tmp = genTreeNode(tok);\n      curr.children.push(tmp);\n      stack.push(curr);\n      curr = tmp;\n    } else if (tok.nesting === -1) {\n      curr.closeNode = tok;\n      if (!stack.length) throw new Error('AST stack underflow.');\n      tmp = stack.pop();\n            // TODO: check whether the close node corresponds to the one it opens\n            // curr = stack[stack.length - 1];\n      curr = tmp;\n    } else if (tok.nesting === 0) {\n      curr.children.push(tok);\n    } else {\n      throw new Error('Invalid nesting level found in token index ' + idx + '.');\n    }\n  });\n\n  if (stack.length !== 0) { throw new Error('Unbalanced block open/close tokens.'); }\n\n  return rootNode.children;\n}\n\nmodule.exports = {\n  makeAST: markdownItAST\n};\n"],"names":["markdownItAST","tokens","genTreeNode","node","nodeType","type","replace","openNode","closeNode","children","rootNode","curr","stack","forEach","tok","idx","tmp","nesting","push","length","Error","pop","module","exports","makeAST"],"mappings":";;;;;EAEA,SAASA,aAAT,CAAuBC,MAAvB,EAA+B;EAC7B,WAASC,WAAT,CAAqBC,IAArB,EAA2B;EACzB,WAAO;EACLC,MAAAA,QAAQ,EAAED,IAAI,IAAIA,IAAI,CAACE,IAAL,CAAUC,OAAV,CAAkB,OAAlB,EAA2B,EAA3B,CADb;EAELC,MAAAA,QAAQ,EAAEJ,IAFL;EAGLK,MAAAA,SAAS,EAAE,IAHN;EAILC,MAAAA,QAAQ,EAAE;EAJL,KAAP;EAMD,GAR4B;;;EAW7B,MAAIC,QAAQ,GAAGR,WAAW,CAAC,IAAD,CAA1B;EACA,MAAIS,IAAI,GAAGD,QAAX;EACA,MAAIE,KAAK,GAAG,EAAZ;EACAX,EAAAA,MAAM,CAACY,OAAP,CAAe,UAAUC,GAAV,EAAeC,GAAf,EAAoB;EACjC,QAAIC,GAAJ;;EACA,QAAIF,GAAG,CAACG,OAAJ,KAAgB,CAApB,EAAuB;EACrBD,MAAAA,GAAG,GAAGd,WAAW,CAACY,GAAD,CAAjB;EACAH,MAAAA,IAAI,CAACF,QAAL,CAAcS,IAAd,CAAmBF,GAAnB;EACAJ,MAAAA,KAAK,CAACM,IAAN,CAAWP,IAAX;EACAA,MAAAA,IAAI,GAAGK,GAAP;EACD,KALD,MAKO,IAAIF,GAAG,CAACG,OAAJ,KAAgB,CAAC,CAArB,EAAwB;EAC7BN,MAAAA,IAAI,CAACH,SAAL,GAAiBM,GAAjB;EACA,UAAI,CAACF,KAAK,CAACO,MAAX,EAAmB,MAAM,IAAIC,KAAJ,CAAU,sBAAV,CAAN;EACnBJ,MAAAA,GAAG,GAAGJ,KAAK,CAACS,GAAN,EAAN,CAH6B;EAKvB;;EACNV,MAAAA,IAAI,GAAGK,GAAP;EACD,KAPM,MAOA,IAAIF,GAAG,CAACG,OAAJ,KAAgB,CAApB,EAAuB;EAC5BN,MAAAA,IAAI,CAACF,QAAL,CAAcS,IAAd,CAAmBJ,GAAnB;EACD,KAFM,MAEA;EACL,YAAM,IAAIM,KAAJ,CAAU,gDAAgDL,GAAhD,GAAsD,GAAhE,CAAN;EACD;EACF,GAnBD;;EAqBA,MAAIH,KAAK,CAACO,MAAN,KAAiB,CAArB,EAAwB;EAAE,UAAM,IAAIC,KAAJ,CAAU,qCAAV,CAAN;EAAyD;;EAEnF,SAAOV,QAAQ,CAACD,QAAhB;EACD;;EAEDa,MAAM,CAACC,OAAP,GAAiB;EACfC,EAAAA,OAAO,EAAExB;EADM,CAAjB;;;;"}